<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/style_blog.css">
    <link rel="stylesheet" href="css/swiper-bundle.min.css">
</head>

<body>

    <header class="page_normal">
        <div class="header__flex">
            <div class="header__logo">
                <img src="img/logo.svg" alt="">
                <p>Завод качественной тротуарной плитки «Строй Камень»</p>
            </div>
            <div class="block_header">
                <div class="block_header__top fl-align">
                    <a href="">
                        <img src="img/adress.png" alt=""> Где купить?</a>
                    <a href="tel:+73412771795"><img src="img/phone.png" alt="">77-17-95</a>
                    <div class="block_header__btn">
                        <button data-zvonok>Заказать звонок</button>
                        <button data-price>Скачать прайс</button>
                    </div>
                </div>
                <div class="block_header__mobMenu">
                    <div id="menu-toggle">
                        <div id="hamburger">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div id="cross">
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                    <div>
                        <a href="tel:+73412771795">
                            <img src="img/phone-call.png" alt="">
                        </a>
                    </div>
                    <div>
                        <img src="img/mail.png" alt="">
                    </div>
                    <div>
                        <img src="img/search.png" alt="">
                    </div>
                    <div>
                        <img src="img/cart.png" alt="">
                    </div>
                    <div>
                        <img src="img/adress-white.png" alt="">
                    </div>
                </div>
                <img src="img/logo.svg" class="block_header__mobLogo" alt="">
                <div class="block_header__menu">
                    <img src="img/logo.svg" class="block_header__menu--img" alt="">
                    <ul class="fl-align">
                        <li>Главная</li>
                        <li>Каталог</li>
                        <li>Акции</li>
                        <li>Где купить</li>
                        <li>Новости</li>
                        <li>Контакты</li>
                    </ul>
                </div>
            </div>
        </div>
    </header>

    <div class="section_blog">
        <div class="container">
            <h1 class="h2_background"><span>Блог</span></h1>
            <div class="section_blog__box">
                <div class="section_blog__item">
                    <div>
                        <h2>Заголовок</h2>
                        <p>Описание</p>
                    </div>
                    <img src="https://www.stroykamen.ru/upload/iblock/483/dseagh1o6hrmb1k8vti9yx3qq7d1fs4h/weHY7f4aTTk.jpg" alt="">
                </div>
                <div class="section_blog__item">
                    <div>
                        <h2>Заголовок</h2>
                        <p>Описание</p>
                    </div>
                    <img src="https://www.stroykamen.ru/upload/iblock/483/dseagh1o6hrmb1k8vti9yx3qq7d1fs4h/weHY7f4aTTk.jpg" alt="">
                </div>
                <div class="section_blog__item">
                    <div>
                        <h2>Заголовок</h2>
                        <p>Описание</p>
                    </div>
                    <img src="https://www.stroykamen.ru/upload/iblock/483/dseagh1o6hrmb1k8vti9yx3qq7d1fs4h/weHY7f4aTTk.jpg" alt="">
                </div>
                <div class="section_blog__item">
                    <div>
                        <h2>Заголовок</h2>
                        <p>Описание</p>
                    </div>
                    <img src="https://www.stroykamen.ru/upload/iblock/483/dseagh1o6hrmb1k8vti9yx3qq7d1fs4h/weHY7f4aTTk.jpg" alt="">
                </div>
                <div class="section_blog__item">
                    <div>
                        <h2>Заголовок</h2>
                        <p>Описание</p>
                    </div>
                    <img src="https://www.stroykamen.ru/upload/iblock/483/dseagh1o6hrmb1k8vti9yx3qq7d1fs4h/weHY7f4aTTk.jpg" alt="">
                </div>
                <div class="section_blog__item">
                    <div>
                        <h2>Заголовок</h2>
                        <p>Описание</p>
                    </div>
                    <img src="https://www.stroykamen.ru/upload/iblock/483/dseagh1o6hrmb1k8vti9yx3qq7d1fs4h/weHY7f4aTTk.jpg" alt="">
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="footer__logo">
                <img src="img/logo.svg" alt="">
            </div>
            <div class="footer__adress">
                <div class="footer__adress--box footer__adress--phone fl-align">
                    <img src="img/phone-call.png" alt="">
                    <a href="tel:+73412771795">77-17-95</a>
                </div>
                <button data-zvonok>Обратный звонок</button>
                <div class="footer__adress--box fl-align">
                    <img src="img/mail.png" alt="">
                    <a href="mailto:zavod_ecoblock@mail.ru">zavod_ecoblock@mail.ru</a>
                </div>
                <div class="footer__adress--box">
                    <img src="img/adress-white.png" alt="">
                    <p>г. Ижевск, ул. Олега Кошевого, 2</p>
                </div>
            </div>
            <div class="footer__menu">
                <ul>
                    <li class="footer__title">О компании</li>
                    <li><a href="">О компании</a></li>
                    <li><a href="">Гарантия</a></li>
                    <li><a href="">Реквизиты</a></li>
                    <li><a href="">Вакансии</a></li>
                </ul>
                <ul>
                    <li class="footer__title">Продукция</li>
                    <li><a href="">Тротуарная плитка и брусчатка</a></li>
                    <li><a href="">Стеновые блоки</a></li>
                    <li><a href="">Декоративные камни</a></li>
                    <li><a href="">Бордюры</a></li>
                    <li><a href="">Вентиляционные блоки</a></li>
                    <li><a href="">Ограничитель парковки</a></li>
                    <li><a href="">Укладка брусчатки</a></li>
                </ul>
                <ul>
                    <li class="footer__title">Покупателем</li>
                    <li><a href="">Доставка</a></li>
                    <li><a href="">Вопрос-ответ</a></li>
                    <li><a href="">Новости</a></li>
                    <li><a href="">Статьи</a></li>
                    <li><a href="">Благоустройство,укладка брусчатки</a></li>
                </ul>

            </div>
            <div class="footer__vidget">
                <div class="footer__vidget--mess">
                    <p>Мы в соцсетях</p>
                    <ul>
                        <li>
                            <img src="img/vk.png" alt="">
                        </li>
                        <li>
                            <img src="img/instagram.png" alt="">
                        </li>
                    </ul>
                </div>
                <a href="">Обратная связь</a>
                <a href="">Письмо директору</a>
            </div>
        </div>
    </footer>

    <script src="https://api-maps.yandex.ru/2.1/?apikey=9f2c8c4d-5788-4c89-8b3e-49139b3f1988&lang=ru_RU" type="text/javascript"></script>
    <script>
        document.querySelectorAll('.tabs .tab').forEach((i, ind) => {
            i.addEventListener('click', (e) => {
                document.querySelectorAll('.tabs_box__element--block').forEach((el, index) => {
                    el.classList.remove('active')
                    if (ind === index) {
                        el.classList.add('active')
                    }
                    if (ind === 0) {
                        document.querySelector('.tabs_box__element--map').style.display = 'block'
                    } else {
                        document.querySelector('.tabs_box__element--map').style.display = 'none'
                    }
                });
            });
        });



        ymaps.ready(init);

        function init() {
            // Создание карты.
            var myMap = new ymaps.Map("tabs_box__element--map", {
                // Координаты центра карты.
                // Порядок по умолчанию: «широта, долгота».
                // Чтобы не определять координаты центра карты вручную,
                // воспользуйтесь инструментом Определение координат.
                center: [56.8497600, 53.20448],
                // Уровень масштабирования. Допустимые значения:
                // от 0 (весь мир) до 19.
                zoom: 10
            });

            MyIconContentLayout = ymaps.templateLayoutFactory.createClass(
                    '<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>'
                ),

                myPlacemark = new ymaps.Placemark(myMap.getCenter(), {
                    hintContent: 'Собственный значок метки',
                    balloonContent: 'Это красивая метка'
                }, {
                    // Опции.
                    // Необходимо указать данный тип макета.
                    iconLayout: 'default#image',
                    // Своё изображение иконки метки.
                    iconImageHref: 'img/home.png',
                    // Размеры метки.
                    iconImageSize: [50, 50],
                    // Смещение левого верхнего угла иконки относительно
                    // её "ножки" (точки привязки).
                    iconImageOffset: [-5, -38]
                }),



                myMap.geoObjects
                .add(myPlacemark);

            function adress_out(adress, zoom) {
                myMap.destroy();
                myMap = new ymaps.Map("tabs_box__element--map", {
                    // Координаты центра карты.
                    // Порядок по умолчанию: «широта, долгота».
                    // Чтобы не определять координаты центра карты вручную,
                    // воспользуйтесь инструментом Определение координат.
                    center: [56.8497600, 53.20448],
                    // Уровень масштабирования. Допустимые значения:
                    // от 0 (весь мир) до 19.
                    zoom: 10
                });

                MyIconContentLayout = ymaps.templateLayoutFactory.createClass(
                    '<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>'
                );




                MyIconContentLayout = ymaps.templateLayoutFactory.createClass(
                        '<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>'
                    ),

                    myPlacemark = new ymaps.Placemark(myMap.getCenter(), {
                        hintContent: 'Собственный значок метки',
                        balloonContent: 'Это красивая метка'
                    }, {
                        // Опции.
                        // Необходимо указать данный тип макета.
                        iconLayout: 'default#image',
                        // Своё изображение иконки метки.
                        iconImageHref: 'img/home.png',
                        // Размеры метки.
                        iconImageSize: [50, 50],
                        // Смещение левого верхнего угла иконки относительно
                        // её "ножки" (точки привязки).
                        iconImageOffset: [-5, -38]
                    });
                ymaps.geocode(adress, {
                    /**
                     * Опции запроса
                     * @see https://api.yandex.ru/maps/doc/jsapi/2.1/ref/reference/geocode.xml
                     */
                    // Сортировка результатов от центра окна карты.
                    // boundedBy: myMap.getBounds(),
                    // strictBounds: true,
                    // Вместе с опцией boundedBy будет искать строго внутри области, указанной в boundedBy.
                    // Если нужен только один результат, экономим трафик пользователей.
                    results: 1
                }).then(function(res) {
                    let firstGeoObject = res.geoObjects.get(0),
                        // Координаты геообъекта.
                        coords = firstGeoObject.geometry.getCoordinates(),
                        // Область видимости геообъекта.
                        bounds = firstGeoObject.properties.get('boundedBy');



                    // firstGeoObject.options.set('preset', 'islands#darkBlueDotIconWithCaption');
                    // Получаем строку с адресом и выводим в иконке геообъекта.
                    firstGeoObject.properties.set('iconCaption', firstGeoObject.getAddressLine());

                    firstGeoObject.options.set('iconLayout', 'default#image');
                    firstGeoObject.options.set('iconImageHref', 'img/home.png');
                    firstGeoObject.options.set('iconImageSize', [50, 50]);
                    //firstGeoObject.options.set('iconImageSize', [50, 50]);




                    myMap.geoObjects.add(firstGeoObject);
                    // Масштабируем карту на область видимости геообъекта.
                    myMap.setCenter(coords, zoom, {
                        // Проверяем наличие тайлов на данном масштабе.
                        checkZoomRange: true
                    });
                });
            }

            let flag = false;

            document.querySelector('.all_label').addEventListener('click', (e) => {
                document.querySelectorAll('.tabs_box__element--item li span').forEach((i) => {
                    adress_out(i.dataset.street, 9);
                })
                flag = false;
                document.querySelector('.all_label').classList.remove('active');
            });

            document.querySelectorAll('.tabs_box__element--item li span').forEach((i) => {
                adress_out(i.dataset.street, 9);
                i.addEventListener('click', (e) => {
                    if (!flag) {
                        flag = true;
                        document.querySelector('.all_label').classList.add('active');
                    }
                    adress_out(i.dataset.street, 15);
                });
            });
        }



        document.querySelector('#menu-toggle').addEventListener('click', function(e) {
            if (!this.classList.contains('open')) {
                this.classList.add('open');
                this.closest('header').classList.add('open_header');
                e.target.closest('.block_header').querySelector('.block_header__menu').style.height = 'auto';
                let height = e.target.closest('.block_header').querySelector('.block_header__menu').offsetHeight;
                let height_img = e.target.closest('.block_header').querySelector('.block_header__mobMenu').offsetHeight;
                e.target.closest('.block_header').querySelector('.block_header__menu').style = null;
                let sum_height = (e.target.closest('.block_header').offsetHeight / 2) + height;
                e.target.closest('header').style.height = sum_height + 'px';
                e.target.closest('.block_header').style.height = sum_height + 'px';
            } else {
                this.classList.remove('open');
                this.closest('header').classList.remove('open_header');
                e.target.closest('.block_header').style.height = null;
                e.target.closest('header').style = null;
            }
        });
        document.querySelector('.btn-6').addEventListener('mouseenter', function(e) {
            let relX = e.layerX,
                relY = e.layerY;
            this.querySelector('span').style.cssText = `
                top: ${relY}px;
                left: ${relX}px;
            `;
        });
    </script>
</body>

</html>
